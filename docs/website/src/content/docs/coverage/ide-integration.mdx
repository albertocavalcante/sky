---
title: IDE Integration
description: View Starlark coverage in VS Code and other editors
---

import { Tabs, TabItem, Aside, Steps, Card, CardGrid, LinkCard } from '@astrojs/starlight/components';

# IDE Integration

View coverage directly in your editor. Covered lines show green, uncovered lines show red.

<Aside type="tip">
**No Sky-specific plugin needed.** Sky outputs standard LCOV format, which works with existing coverage viewer extensions.
</Aside>

---

## VS Code (Recommended)

The **Coverage Gutters** extension is the best way to view LCOV coverage in VS Code.

<CardGrid>
  <Card title="805K+ Installs" icon="star">
    Most popular VS Code coverage extension
  </Card>
  <Card title="5/5 Rating" icon="approve-check">
    Highly rated with active maintenance
  </Card>
</CardGrid>

<LinkCard
  title="Coverage Gutters on VS Code Marketplace"
  description="Display test coverage generated by lcov or xml - works with many languages"
  href="https://marketplace.visualstudio.com/items?itemName=ryanluker.vscode-coverage-gutters"
/>

### Setup

<Steps>

1. **Install the extension**

   Open VS Code and install from the Extensions panel:
   - Search for "Coverage Gutters"
   - Or use the command: `code --install-extension ryanluker.vscode-coverage-gutters`

2. **Generate LCOV coverage**

   Configure skytest to output LCOV format:

   ```toml title="sky.toml"
   [test.coverage]
   enabled = true
   output = "coverage.lcov"
   ```

   Run your tests:

   ```bash
   skytest tests/
   ```

3. **View coverage**

   - Open a source file
   - Press `Cmd+Shift+7` (macOS) or `Ctrl+Shift+7` (Windows/Linux)
   - Or click "Watch" in the status bar for auto-updates

</Steps>

### What You'll See

After enabling coverage display:

```
  1  ‚îÇ üü¢ ‚îÇ def add(a, b):
  2  ‚îÇ üü¢ ‚îÇ     return a + b
  3  ‚îÇ    ‚îÇ
  4  ‚îÇ üü¢ ‚îÇ def divide(a, b):
  5  ‚îÇ üü¢ ‚îÇ     if b == 0:
  6  ‚îÇ üî¥ ‚îÇ         return None    ‚Üê Uncovered!
  7  ‚îÇ üü¢ ‚îÇ     return a / b
```

| Gutter Color | Meaning |
|--------------|---------|
| Green | Line was executed |
| Red | Line was NOT executed |
| No color | Non-executable (blank, comment) |

### Keyboard Shortcuts

| Action | macOS | Windows/Linux |
|--------|-------|---------------|
| Display Coverage | `Cmd+Shift+7` | `Ctrl+Shift+7` |
| Watch Mode | `Cmd+Shift+8` | `Ctrl+Shift+8` |
| Remove Coverage | `Cmd+Shift+9` | `Ctrl+Shift+9` |

### Watch Mode

Enable automatic updates when the coverage file changes:

1. Click **Watch** in the VS Code status bar
2. Run your tests - coverage updates automatically
3. No need to manually refresh

### Configuration

Optional settings in `.vscode/settings.json`:

```json title=".vscode/settings.json"
{
  "coverage-gutters.coverageFileNames": [
    "coverage.lcov",
    "lcov.info"
  ],
  "coverage-gutters.showLineCoverage": true,
  "coverage-gutters.showRulerCoverage": true
}
```

---

## JetBrains IDEs

<Aside type="caution">
JetBrains IDEs (IntelliJ, GoLand, WebStorm) do **not** natively support LCOV file import. They use their own coverage formats (`.ic`, JaCoCo `.exec`).
</Aside>

### Recommended: Use HTML Output

The simplest approach for JetBrains users is to generate an HTML report:

```toml title="sky.toml"
[test.coverage]
enabled = true
output = "coverage.html"
```

```bash
skytest tests/
open coverage.html
```

The HTML report opens in your browser with:
- File list with coverage percentages
- Color-coded badges
- Expandable line-by-line details

### Alternative: Use genhtml

Generate a browsable HTML report from LCOV:

```bash
# Generate LCOV
skytest --coverage --coverage-output=coverage.lcov tests/

# Convert to HTML (requires lcov package)
genhtml coverage.lcov --output-directory coverage-html

# Open in browser
open coverage-html/index.html
```

<Tabs>
  <TabItem label="macOS">
```bash
brew install lcov
```
  </TabItem>
  <TabItem label="Ubuntu/Debian">
```bash
apt-get install lcov
```
  </TabItem>
  <TabItem label="Fedora">
```bash
dnf install lcov
```
  </TabItem>
</Tabs>

---

## Neovim

Use the **nvim-coverage** plugin for LCOV support.

### Installation

```lua title="~/.config/nvim/lua/plugins/coverage.lua"
-- Using lazy.nvim
return {
  "andythigpen/nvim-coverage",
  dependencies = "nvim-lua/plenary.nvim",
  config = function()
    require("coverage").setup({
      signs = {
        covered = { hl = "CoverageCovered", text = "‚ñé" },
        uncovered = { hl = "CoverageUncovered", text = "‚ñé" },
      },
    })
  end,
}
```

### Usage

```vim
:CoverageLoad       " Load coverage.lcov
:CoverageShow       " Show coverage signs
:CoverageToggle     " Toggle display
:CoverageSummary    " Show summary
```

---

## Other Editors

For editors without LCOV extensions, use the **HTML output**:

```toml title="sky.toml"
[test.coverage]
enabled = true
output = "coverage.html"
```

The HTML report is self-contained and works in any browser.

---

## Quick Reference

| Editor | Method | Format |
|--------|--------|--------|
| VS Code | Coverage Gutters extension | LCOV |
| JetBrains | HTML report in browser | HTML |
| Neovim | nvim-coverage plugin | LCOV |
| Others | HTML report in browser | HTML |

---

## Troubleshooting

### VS Code: Coverage not showing

1. **Check the file exists**: `ls coverage.lcov`
2. **Verify LCOV format**: File should start with `TN:` or `SF:`
3. **Try manual display**: Press `Cmd+Shift+7` / `Ctrl+Shift+7`
4. **Check status bar**: Click on coverage status for error messages

### Coverage shows wrong lines

1. **Regenerate coverage**: Run tests again after code changes
2. **Check file paths**: Paths in LCOV must match actual file locations
3. **Clear cache**: In VS Code, run "Coverage Gutters: Remove Coverage"

### Extension not finding coverage file

Coverage Gutters looks for these files by default:
- `coverage.lcov`
- `lcov.info`
- `coverage/lcov.info`

Update your output path to match, or configure the extension:

```json title=".vscode/settings.json"
{
  "coverage-gutters.coverageFileNames": [
    "your-custom-path.lcov"
  ]
}
```
